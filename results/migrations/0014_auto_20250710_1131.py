# Generated by Django 5.2.1 on 2025-07-10 06:01

from django.db import migrations


class Migration(migrations.Migration):

    dependencies = [
        ("results", "0013_alter_predictionhistory_options_and_more"),
    ]
    atomic = False
    operations = [
        # Add indexes for better query performance
        migrations.RunSQL(
            "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_prize_entry_lottery_prize_date ON results_prizeentry(lottery_result_id, prize_type, ticket_number);",
            reverse_sql="DROP INDEX IF EXISTS idx_prize_entry_lottery_prize_date;"
        ),
        migrations.RunSQL(
            "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_lottery_result_published_date ON results_lotteryresult(is_published, date DESC) WHERE is_published = true;",
            reverse_sql="DROP INDEX IF EXISTS idx_lottery_result_published_date;"
        ),
        migrations.RunSQL(
            "CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_prediction_history_lookup ON results_predictionhistory(lottery_name, prize_type, prediction_date DESC);",
            reverse_sql="DROP INDEX IF EXISTS idx_prediction_history_lookup;"
        ),
    ]
